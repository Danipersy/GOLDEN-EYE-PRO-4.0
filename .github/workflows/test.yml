name: Test Golden Eye Pro

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'  # IMPORTANTE: usa 3.10, non 3.12!
      
      - name: Upgrade pip
        run: |
          python -m pip install --upgrade pip
          pip install --upgrade setuptools wheel
      
      - name: Installa dipendenze
        run: |
          # Installa prima le dipendenze di base
          pip install streamlit pandas numpy plotly requests yfinance
          
          # Poi installa pandas_ta (nome corretto)
          pip install pandas_ta
          
          # Oppure prova con versioni alternative se necessario
          # pip install ta  # Libreria alternativa
      
      - name: Verifica installazione
        run: |
          python -c "
import sys
print('üêç Python version:', sys.version)
print('\nüì¶ Verifica pacchetti installati:')
try:
    import pandas_ta as ta
    print(f'‚úÖ pandas_ta {ta.__version__}')
except:
    try:
        import ta
        print(f'‚úÖ ta library {ta.__version__}')
    except:
        print('‚ùå Nessuna libreria TA trovata')
        sys.exit(1)
"
      
      - name: Test import
        run: |
          python -c "
import config
print('‚úÖ config.py OK')
from indicators.robust_ta import compute_indicators_15m
print('‚úÖ robust_ta OK')
"
